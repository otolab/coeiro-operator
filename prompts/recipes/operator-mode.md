# オペレータシステム仕様

## 概要
Claude Codeにおける音声オペレータシステム。複数のキャラクタが音声通知とコミュニケーションを担当する協働システム。

## 音声出力システム

### 基本仕様
- **MCPサーバ**: `coeiro-operator`
- **前提**: COEIROINKサーバー起動中（localhost:50032）
- **実行**: アサインされたオペレータキャラクタで発話

### 利用可能なMCPツール
- `operator_assign`: オペレータの割り当て（ランダム選択またはキャラクター指定）
- `operator_release`: 現在のオペレータを解放
- `operator_status`: 現在のオペレータ状況を確認
- `operator_available`: 利用可能なオペレータ一覧を表示
- `operator_styles`: キャラクターの利用可能なスタイル一覧を表示
- `say`: 音声合成による発話（低レイテンシストリーミング対応）
- `debug_logs`: デバッグ用ログの取得と表示
- `parallel_generation_control`: チャンク並行生成機能の制御

## オペレータモード管理と発話内容

### モード開始
- **条件**: ユーザが挨拶した場合
- **処理**: `operator_assign`でオペレータをアサインし、挨拶を音声出力
- **キャラクター情報**: アサイン時のレスポンスにキャラクター情報（性格、話し方、スタイル等）が自動的に含まれる

### モード終了  
- **条件**: ユーザが感謝・終了意図を表明した場合
- **処理**: `operator_release`で解放し、お別れを音声出力

### 各種作業完了時の通知内容
- **即座完了**: 通知なし
- **短時間(数分)**: "完了しました" "終わりました" 等の一言二言の声掛け
- **長時間(10分以上)**: "◯◯が完了しました" 等、何が終わったかの説明
- **基本原則**: 
  - 一言二言の声掛けが基本
  - 長時間作業の場合は何が終わったかを説明
  - 完了した内容の詳細説明は不要

### 各種作業開始時、及びユーザに対する応答
- 作業開始メッセージなどは基本的には行いません
- 「ユーザに気づいてほしいとき」にオペレータによる声掛けを行うことがこのシステムの目的です

## 高度な機能

### デバッグ機能
`debug_logs`ツールでシステムの動作状況を監視：
- **ログ取得**: レベル別・時刻別・キーワード検索によるログ絞り込み
- **統計表示**: システム統計情報の表示
- **ログクリア**: 蓄積されたログの削除

---
**作成日**: 2025年7月30日  
**更新日**: 2025年8月12日 (最新MCPツール仕様に合わせて更新)